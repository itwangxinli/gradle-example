/*
 * This file was generated by the Gradle 'init' task.
 *
 * This is a general purpose Gradle build.
 * Learn how to create Gradle builds at https://guides.gradle.org/creating-new-gradle-builds/
 */

apply plugin: 'idea'


allprojects {
    repositories {
        mavenLocal()
//        maven { url 'http://maven.derbysoft.tm/artifactory/libs-release' }
        maven { url "https://plugins.gradle.org/m2/" }
        mavenCentral()
    }


}


subprojects {
    version = '1.0'
    apply plugin: 'java'
    apply plugin: 'scala'
    apply plugin: 'maven'
    apply plugin: 'maven-publish'


    sourceCompatibility = 1.8
    targetCompatibility = 1.8

    [compileJava, compileTestJava, javadoc]*.options*.encoding = 'UTF-8'

    ext {
        scalaVersion = '2.12.6'
        springBootVersion = "2.0.4.RELEASE"
        userGroup="com.derbysot.gradle"
    }

    task sourceJar(type: Jar) {
        classifier = 'sources'
        from sourceSets.main.allSource
    }


    publishing {
        publications {
            maven(MavenPublication) {
                groupId "$userGroup"
                artifactId project.name
                version project.version
                from components.java
                artifact(sourceJar) {
                    classifier = 'sources'
                }
            }
        }
    }


    configurations {
        // 所有需要忽略的包定义在此
        all*.exclude group: 'commons-httpclient'
        all*.exclude group: 'commons-logging'
        all*.exclude group: 'commons-beanutils', module: 'commons-beanutils'
    }

    dependencies {
        compile(
                "org.scala-lang:scala-library:$scalaVersion",
                'org.scala-lang.modules:scala-xml_2.12:1.1.0',
        )

        // 测试依赖
        testCompile(
                "junit:junit:4.12",
                'org.scalatest:scalatest_2.12:3.0.5'
        )

    }
}